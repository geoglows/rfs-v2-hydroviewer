<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>River Forecast System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="GEOGLOWS Hydroviewer">
  <meta name="author" content="Riley Hales PhD">
  <meta name="keywords" content="RFS, River Forecast System, Hydrology, Streamflow, Global, GEOGLOWS, Hydroviewer, Streamflow, Forecast, Retrospective">
  <meta name="robots" content="index, follow">

  <!-- CSS Framework -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

  <!-- Plotly -->
  <script src="https://cdn.plot.ly/plotly-2.35.3.min.js" charset="utf-8"></script>

  <!-- Load Calcite components from CDN -->
  <link rel="stylesheet" href="https://js.arcgis.com/4.32/esri/themes/light/main.css"/>
  <script src="https://js.arcgis.com/4.32/"></script>
  <script type="module" src="https://js.arcgis.com/calcite-components/3.0.3/calcite.esm.js"></script>
  <script type="module" src="https://js.arcgis.com/map-components/4.32/arcgis-map-components.esm.js"></script>
  <!-- App -->
  <link rel="stylesheet" href="/static/css/main.css"/>
  <script src="/static/js/localization.en-US.js" async></script>
  <script src="/static/js/main.js" defer></script>
</head>

<body>
<div id="forecast-modal" class="modal bottom-sheet" style="height: 75%">
  <div class="modal-content" style="display: flex; flex-direction: column; align-items: center">
    <div style="display: flex; flex-direction: row; justify-content: space-between; align-items: center; width: 100%">
      <div style="flex-grow: 1; max-width: 150px"></div>
      <h4 style="margin: 0; text-align: center">River Forecast</h4>
      <input type="date" id="forecast-date-calendar" name="forecast-date-calendar" min="2024-07-01" onkeydown="return false" style="max-width: 150px;">
    </div>
    <div class="load-status"></div>
    <div id="forecastPlot" class="chart"><h4>Enter a River ID or use the map to click on a stream to view data</h4></div>
  </div>
  <div class="modal-footer">
    <button class="btn btn-success" id="download-forecast-btn" disabled><a id="download-forecast-link" target="_blank">Save Forecast Data (CSV)</a></button>
    <a class="modal-close waves-effect waves-green btn-flat">Close</a>
  </div>
</div>
<div id="retro-modal" class="modal bottom-sheet" style="height: 75%">
  <div class="modal-content" style="display: flex; flex-direction: column; align-items: center">
    <h4 style="margin: 0">Retrospective Report</h4>
    <div class="load-status"></div>
    <div id="retroPlot" class="chart"><h4>Enter a River ID or use the map to click on a stream to view data</h4></div>
    <div id="yearlyVolPlot" class="chart"></div>
    <div id="yearlyStatusPlot" class="chart"></div>
    <div id="fdcPlot" class="chart"></div>
  </div>
  <div class="modal-footer">
    <button class="btn btn-success" id="download-retrospective-btn" disabled>
      <a id="download-retrospective-link" target="_blank">Save Retrospective Data (CSV)</a>
    </button>
    <a href="#" class="modal-close waves-effect waves-green btn-flat">Close</a>
  </div>
</div>
<div id="filter-modal" class="modal bottom-sheet" style="height: 75%">
  <div class="modal-content" style="display: flex; flex-direction: column; align-items: center">
    <div style="display: flex; flex-direction: row; justify-content: space-between; align-items: center; width: 100%">
      <h4>Filter Streams on Map</h4>
    </div>
    <div style="width: 100%">
      <div>
        <label for="outletCountry">River Outlet Country</label>
        <select id="outletCountry" class="browser default" multiple>
        </select>
      </div>
      <div>
        <label for="riverCountry">River Country</label>
        <select id="riverCountry" class="browser default" multiple>
        </select>
      </div>
      <div>
        <label for="vpuSelect">VPU Number</label>
        <select id="vpuSelect" class="browser default" multiple>
        </select>
      </div>
      <div>
        <label for="definitionString">Enter Custom SQL Filters (<a href="https://livefeeds3.arcgis.com/arcgis/rest/services/GEOGLOWS/GlobalWaterModel_Medium/MapServer/0">Visit the Esri Living
          Atlas</a>
          for all attribute options)</label>
        <input type="text" id="definitionString" placeholder=""/>
      </div>
      <div>
        <label for="definition-expression">Definition Currently Displayed</label>
        <input type="text" id="definition-expression" disabled/>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button class="btn" onclick="updateLayerDefinitions()">Apply Filters</button>
    <button class="btn btn-secondary" onclick="resetDefinitionExpression()">Clear Filters</button>
    <a class="modal-close waves-effect waves-green btn-flat">Close</a>
  </div>
</div>
<div id="about-modal" class="modal bottom-sheet" style="height: 75%">
  <div class="modal-content" style="display: flex; flex-direction: column; align-items: center">
    <div style="display: flex; flex-direction: row; justify-content: space-between; align-items: center; width: 100%">
      <h4>About</h4>
    </div>
    <div style="width: 100%; max-width: 800px">
      <p>
        To learn more about the GEOGLOWS project, visit <a href="https://www.geoglows.org" target="_blank">geoglows.org</a>.
        For more information about the River Forecast System please visit <a href="https://training.geoglows.org" target="_blank">training.geoglows.org</a>.
        For documentation and data download instructions, please consult <a href="https://data.geoglows.org" target="_blank">data.geoglows.org</a>.
      </p>
      More information about the NOAA map layers can be found at:
      <ol>
        <li>NOAA-20 VIIRS True Color: <a href="https://www.arcgis.com/home/item.html?id=c873f4c13aa54b25b01270df9358dc64" target="_blank">arcgis.com</a></li>
        <li>NOAA-20 VIIRS Water States: <a href="https://www.arcgis.com/home/item.html?id=3695712d28354952923d2a26a176b767" target="_blank">arcgis.com</a></li>
        <li>NOAA-20 VIIRS Thermal Anomalies: <a href="https://www.arcgis.com/home/item.html?id=dece90af1a0242dcbf0ca36d30276aa3" target="_blank">arcgis.com</a></li>
        <li>NOAA GOES Colorized Infrared Weather Satellite (10 minute updates): <a href="https://www.arcgis.com/home/item.html?id=37a875ff3611496883b7ccca97f0f5f4" target="_blank">arcgis.com</a></li>
        <li>NOAA-20 VIIRS Flood Composite: <a href="https://floods.ssec.wisc.edu/products/RIVER-FLDglobal-composite" target="_blank">University of Wisconsin Madison SSEC</a></li>
      </ol>
    </div>
  </div>
  <div class="modal-footer">
    <a class="modal-close waves-effect waves-green btn-flat">Close</a>
  </div>
</div>

<div class="body-wrapper">
  <div class="nav-bar-wrapper" style="background-color: #81d4fa">
    <h4 style="font-size: 2rem; font-weight: bolder">
      <span class="hide-on-small-only">GEOGLOWS </span>R<span class="hide-on-small-only">iver </span>F<span class="hide-on-small-only">orecast </span>S<span class="hide-on-small-only">ystem</span>
    </h4>
    <div>
      <a data-tooltip="View Forecast" data-position="bottom" class="btn modal-trigger tooltipped" href="#forecast-modal"><i class="material-icons">timeline</i></a>
      <a data-tooltip="Retrospective Report" data-position="bottom" class="btn modal-trigger tooltipped" href="#retro-modal"><i class="material-icons">assessment</i></a>
      <a data-tooltip="Learn More" data-position="bottom" class="btn modal-trigger tooltipped" href="#about-modal"><i class="material-icons">help</i></a>
      <a data-tooltip="Language" data-position="bottom" class="btn dropdown-trigger tooltipped" href="#" data-target="language-select"><i class="material-icons">translate</i></a>
      <ul id="language-select" class="dropdown-content">
        <li><a href="#" data-lang="en-US">English</a></li>
        <li><a href="/es" data-lang="es-ES">Espa√±ol</a></li>
      </ul>
    </div>
  </div>

  <arcgis-map item-id="a69f14ea2e784e019f4a4b6835ffd376">
    <arcgis-zoom position="top-left"></arcgis-zoom>
    <arcgis-locate position="top-left" scale="5000"></arcgis-locate>

    <arcgis-expand close-on-esc position="top-right">
      <arcgis-layer-list></arcgis-layer-list>
    </arcgis-expand>
    <arcgis-expand close-on-esc position="top-right">
      <arcgis-basemap-gallery></arcgis-basemap-gallery>
    </arcgis-expand>

    <arcgis-expand close-on-esc position="bottom-left" mode="floating">
      <arcgis-legend legend-style="classic"></arcgis-legend>
    </arcgis-expand>

    <arcgis-scale-bar position="bottom-right" bar-style="line" unit="dual"></arcgis-scale-bar>
  </arcgis-map>
  <div id="timeSlider"></div>
</div>
</body>
</html>